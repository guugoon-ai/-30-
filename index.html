<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>영상 디버그</title>
<style>
  html,body { margin:0; height:100%; background:#000; color:#fff; font:14px system-ui; }
  video { position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover; background:#000; }
  .panel {
    position:fixed; left:12px; top:12px; right:12px;
    background:rgba(0,0,0,.5); padding:10px; border-radius:10px;
  }
  .row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
  button, a { padding:6px 10px; border-radius:8px; border:1px solid #666; background:#111; color:#fff; text-decoration:none; }
  code { font-family:ui-monospace, SFMono-Regular, Menlo, monospace; }
</style>
</head>
<body>
  <video id="v" playsinline webkit-playsinline muted autoplay controls preload="auto">
    <source src="video.mp4" type="video/mp4" />
    브라우저에서 동영상을 재생할 수 없습니다.
  </video>

  <div class="panel" id="panel">
    <div class="row">
      <button id="btnPlay">play()</button>
      <button id="btnPause">pause()</button>
      <button id="btnUnmute">unmute</button>
      <button id="btnMute">mute</button>
      <a href="https://www.sooperang.or.kr/indvz/main.do?hmpgId=FT00001" target="_blank">이동 링크 열기</a>
    </div>
    <div style="margin-top:8px">
      <div>readyState: <code id="rs">-</code> / networkState: <code id="ns">-</code> / paused: <code id="pd">-</code> / currentTime: <code id="ct">0</code></div>
      <div>이벤트: <code id="ev">-</code></div>
    </div>
  </div>

<script>
  const v = document.getElementById('v');
  const rs = document.getElementById('rs');
  const ns = document.getElementById('ns');
  const pd = document.getElementById('pd');
  const ct = document.getElementById('ct');
  const ev = document.getElementById('ev');

  function upd() {
    rs.textContent = v.readyState;   // 4가 가장 안정(_HAVE_ENOUGH_DATA)
    ns.textContent = v.networkState; // 1:IDLE 2:LOADING 3:NO_SOURCE
    pd.textContent = String(v.paused);
    ct.textContent = v.currentTime.toFixed(2);
  }
  ['loadstart','loadedmetadata','loadeddata','canplay','canplaythrough','play','playing','pause','waiting','stalled','suspend','ended','error','timeupdate','seeking','seeked'].forEach(e=>{
    v.addEventListener(e, ()=>{ upd(); ev.textContent = e; });
  });
  setInterval(upd, 300);

  document.getElementById('btnPlay').onclick = ()=> v.play().catch(()=>{});
  document.getElementById('btnPause').onclick = ()=> v.pause();
  document.getElementById('btnUnmute').onclick = ()=> { v.muted = false; };
  document.getElementById('btnMute').onclick = ()=> { v.muted = true; };
</script>
</body>
</html>
